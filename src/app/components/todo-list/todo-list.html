
<h1>ToDo List</h1>

<div class="todos">
  @for (todo of todos; track todo.id) {
    <div
      class="todo-row"
      [style.background]="isPastDue(todo.date) ? 'lightcoral' : 'white'"
      [class.even]="$even"
    >
      <div class="title">{{ todo.title }}</div>
      <div class="status">{{ todo.status }}</div>
      @switch (todo.status) {
        @case (TodoStatus.Done) { <div>✓</div> }
        @case (TodoStatus.NotDone) { <div>✗</div> }
        @case (TodoStatus.InProgress) { <div>⏳</div> }
      }
      <div class="date">{{ todo.date | date:'dd/MM/yyyy' }}</div>
      <div>
        <button
          (click)="updateStatus(todo, TodoStatus.Done)"
          [disabled]="todo.status === TodoStatus.Done">
          בוצע
        </button>
        <button
          (click)="updateStatus(todo, TodoStatus.InProgress)"
          [disabled]="todo.status === TodoStatus.InProgress">
          בתהליך
        </button>
        <button
          (click)="updateStatus(todo, TodoStatus.NotDone)"
          [disabled]="todo.status === TodoStatus.NotDone">
          לא בוצע
        </button>
      </div>
      <div>{{ $last ? 'זוהי המשימה האחרונה שלך...' : '' }}</div>

    </div>
  } @empty {
    <h2>No todos available</h2>
  }
</div>
